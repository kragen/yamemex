<script>
chrome.browserAction.onClicked.addListener(function(tab) {
    console.log("Clicked for %o", tab);
});

var annotations = {
    'http://code.google.com/chrome/extensions/browserAction.html': 
        'These are the annotations for browserAction.html!'
};

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
        if (request.updateAnnotationsFor === undefined) return;
        annotations[request.updateAnnotationsFor] = request.annotations;
    }
);

chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
        if (request.getAnnotationsFor === undefined) return;
        sendResponse(annotations[request.getAnnotationsFor] || 
                     'Type your annotations here');
    }
);
</script>
